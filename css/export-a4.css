/* Watermark for tables inside the PDF export container */
.pdf-export-container .result-table-container {
  position: relative;
}

.pdf-export-container .result-table-container::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-30deg);
  width: 100%;
  height: 100%;
  background-image: url('../asset/pca_watermark.png');
  background-repeat: no-repeat;
  background-position: center;
  background-size: 90%;
  opacity: 0.10; /* slightly increased for visibility */
  pointer-events: none;
  z-index: 5;
}
/* Export-only A4 layout (px-based). Loaded dynamically during PDF export. */

/* Root export mode flag to avoid affecting normal layout */
body.export-mode {
  background: #fff !important;
  overflow: visible !important;
}

/* Fixed A4 canvas at 96 DPI: 794 x 1123 px */
body.export-mode .export-a4 {
  width: 794px;
  min-height: 1123px;
  margin: 0 auto !important;
  padding: 6px 0 6px 0; /* tighter top/bottom padding */
  box-sizing: border-box;
  background: #ffffff !important;
  color: #000;
  border: none;
  position: relative; /* allow absolute positioning of footer */
}

/* Preserve original typography; do not override font sizes to keep component scale unchanged */

/* Tables & charts constrained to page width */
body.export-mode .export-a4 .result-table-container {
  width: 95% !important; /* match hr and footer width */
  max-width: 95% !important;
  margin: 0 auto !important;
}
body.export-mode .export-a4 .result-table {
  width: 100% !important;
  max-width: 100% !important;
}

/* Normalize hr inside export (avoid global vw limits) */
body.export-mode .export-a4 hr {
  width: 95% !important;
  max-width: none !important;
  /* 0.22rem 0.12rem => 3.52px 1.92px (base 16px) */
  margin: 3.52px auto 1.92px auto !important; /* further tightened (px-converted) */
}

/* Make the HR inside the export footer the same length as the top HR
   (avoid 95% of 95% by setting it to 100% of the footer width). */
body.export-mode .export-a4 .app-footer.export-footer hr {
  width: 100% !important;
  /* 0.2rem 0.28rem => 3.2px 4.48px */
  margin: 3.2px auto 4.48px auto !important; /* slightly more compact (px-converted) */
}

/* Footer fixed to bottom of page in export */
body.export-mode .export-a4 .app-footer.export-footer {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0; /* align with bottom margin */
  margin: 0 auto;
  width: 95%; /* match hr width */
  padding-bottom: 26px; /* slight increase for clearer separation below text */
}

/* Compress table cell vertical space */
body.export-mode .export-a4 .result-table td,
body.export-mode .export-a4 .result-table th {
  padding: 1px 6px !important;
  line-height: 1.12 !important;
}

/* Remove underline from employee type labels in export */
body.export-mode .export-a4 .result-table td a,
body.export-mode .export-a4 .result-table td span.employee-type-label,
body.export-mode .export-a4 .result-table td .employee-type-label {
  text-decoration: none !important;
}

/* Tighter spacing for result titles and center values */
body.export-mode .export-a4 .result-title { margin-bottom: 2px !important; }

/* Compact list items inside result lists */
body.export-mode .export-a4 .result-list .result-item { margin: 0 0 1px 0 !important; }

/* ================= Pixel-Fixed Typography for Export ================= */
body.export-mode .export-a4 h1 {
  font-size: 20px !important;
}


body.export-mode .export-a4 .result-title,
body.export-mode .export-a4 .result-total,
body.export-mode .export-a4 .result-list .result-item,
body.export-mode .export-a4 .result-table td,
body.export-mode .export-a4 .result-table th {
  font-size: 18px !important; 
}


body.export-mode .export-a4 .app-footer.export-footer .footer-title {
  width: 100%;
}

body.export-mode .export-a4 .app-footer.export-footer .footer-text {
  width: 100%;
  text-align: justify; /* justify text to match hr width visually */
}

/* Keep text away from the version label area on the right */
/* Vertical spacing in footer prevents overlap with version/ID line. */

/* Remove link styling if any anchor slips in */
body.export-mode .export-a4 .app-footer.export-footer a {
  color: inherit;
  text-decoration: none;
  pointer-events: none;
}

body.export-mode .export-a4 canvas {
  max-width: 320px !important;
  max-height: 320px !important;
}

/* Reduce the gap between the HR under the main header and the PAYSLIP title */
body.export-mode .export-a4 .pdf-export-title {
  /* 0.15rem => 2.4px */
  margin-top: 2.4px !important;
}

/* Version label in export: pin to bottom-right of the export page */
/* When the version label is placed inside the export footer, pin it to the footer's bottom-right */
body.export-mode .export-a4 .app-footer.export-footer .version-display {
  position: absolute !important;
  bottom: 0px !important; /* moved further downward */
  right: -6px !important; /* nudge to visually align with justified edge */
  z-index: 1001 !important;
  font-weight: 700 !important;
  color: #222 !important;
  white-space: nowrap !important; /* keep on one line */
}

/* Export ID on the same line (bottom-left), aligned with footer text */
body.export-mode .export-a4 .app-footer.export-footer .export-id {
  position: absolute !important;
  bottom: 0px !important; /* moved further downward */
  left: 0 !important; /* align with the left edge of footer text */
  z-index: 1001 !important;
  /* 0.75rem => 12px */
  font-size: 12px !important;
  font-weight: 700 !important;
  color: #222 !important;
  white-space: nowrap !important; /* keep on one line */
}

/* Hide any non-result UI just in case */
body.export-mode #progress-bar,
body.export-mode .form-navigation,
body.export-mode .app-footer:not(.export-footer) { display: none !important; }
